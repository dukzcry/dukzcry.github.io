<!DOCTYPE html>
<html lang="ru">
<head>
<title>Duck's Cry - Главная</title>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="./style.css" />
<link rel="alternate" type="application/rss+xml" title="Утки, у-у-у!" href="./rss.xml">
<link rel="alternate" type="application/atom+xml" title="Утки, у-у-у!" href="./atom.xml">
<meta name="description" content="dukzcry homepage">
<meta name="Keywords" content="dukzcry">
</head>
<body>
<div class="buttons">
<a href="./" class="active">Главная</a><a href="./pages/software.html" class="last index.html">Поделки</a><a href="./gallery" class="index.html">Галерея</a><a href="./archive.html" class="index.html">Архив</a><a href="./pages/about.html" class="last index.html">О сайте</a>
</div>
<div class="header">
<h1>Duck's Cry</h1>
Утки, у-у-у!
</div>
<div class="content">

    <p>
<a href="./posts/server.html">Собираем домашний сервер</a>
<br />
17 сентября 2021

    написал dukzcry

</p>
<p>Понадобилось собрать домашний сервер для различных гедонистических целей. Как можно заметить на фото ниже, данный сервер и сопутствующие причиндалы уютно разместились на бабушкиной антресоли:</p>
<p><span class="math inline">

<a href="./gallery/server/photo1681667758.jpeg.html"><img src="./gallery/server/photo1681667758.thumb.jpeg" /></a>
<link rel="prefetch" href="./gallery/server/photo1681667758.jpeg">



<a href="./gallery/server/photo1681667759.jpeg.html"><img src="./gallery/server/photo1681667759.thumb.jpeg" /></a>
<link rel="prefetch" href="./gallery/server/photo1681667759.jpeg">


</span></p>
<p>В качестве компонентов были выбраны следующие железки:</p>
<ul>
<li>Платформа ASRock DeskMini X300. Подкупили форм-фактор Mini-STX и возможности расширения: 1 укороченный и 2 полноразмерных слота M.2, а также 2 отсека для 2.5” дисков</li>
<li>Процессор AMD Ryzen 5 3400G, пока устраивает</li>
<li>16 Гб ОЗУ от Kingston, пока хватает</li>
<li>256 Гб Samsung PM961 SSD под систему, вынул из своего ноута, пока работает</li>
<li>2 Тб винт от Western Digital под данные, поскольку нет требования к скорости диска. В дальнейшем планируется по необходимости наращивать количество накопителей</li>
</ul>
<p>Из сопутствующего:</p>
<ul>
<li>Трофейный ИБП Ippon Back Power Pro LCD 600, аккумулятор пришлось менять</li>
<li>Старый принтер Xerox Phaser 3116, он же Samsung ML-1520. Родителям купил новый беспроводной принтер, а себе забрал старичка</li>
</ul>
<p>Наиболее затруднительным моментом стал подбор Wi-FI адаптеров для работы в режиме точки доступа. Для сети стандарта 802.11n для поддержки устаревших устройств выбор пал на дешёвый USB-свисток с Ali на чипе AR9271 поддерживаемый старым добрым драйвером ath9k, граалем всех борцов за свободное ПО. Для более современной сети, соотнеся цены и работоспособность предложений на рынке, я выбрал адаптер QCA6174 формата M.2 поддерживаемый богомерзким драйвером ath10k. Дело на самом деле вовсе не в драйвере, а в закрытой прошивке. Данный адаптер за 500р развивает ту же цифру скорости в 500 Мбит/с. К сожалению стандарт лишь 802.11ac, и более высокие скорости ему не снились. Но этого более-менее достаточно для стриминга игр и кино на телик и проектор. Я пробовал более современный адаптер 802.11ax MT7921, встроенный в материнку моего настольного компа, но к сожалению в режиме работы 802.11ac он показал намного меньшие скорости, нежели QCA6174, да и по деньгам он будет дороже.<br />
Но просто установить адаптер оказалось недостаточным, пришлось ещё обойти некие региональные ограничения для работы адаптера в режиме точки в диапазоне пятигигагерцовых сетей. К счастью, для драйвера ath10k у проекта OpenWRT оказался патч снимающий данные региональные ограничения. Патч так же доступен через опцию <code>networking.wireless.athUserRegulatoryDomain</code> в дистрибутиве NixOS, который я использую.<br />
Зачем вообще мне понадобилось делать программные точки доступа? Для удобства гибкого руления ими через единый конфиг NixOS’а. Ну и просто потому что собирать свой зюзероутер это просто дань хорошей старой традиции линуксоидов.</p>
<p>Небольшой вишенкой на торте стала HDMI-затычка с Ali, эмулирующая присутствие монитора. Это полезно как для иксов, так и для вялого чтобы стримить десктоп без использования программых костылей. Пусть лучше будет костыль аппаратный.</p>
<p>Далее перечислены задачи, которые в данный момент решает сервер. Поскольку я использую любимицу девопсов и функциональных программистов NixOS, под некоторыми пунктами буду делиться своими полезными модулями для NixOS, реализующими соответствующий функционал:</p>
<ul>
<li>Роутер и Wi-Fi точка доступа<br />
<a href="https://github.com/repos-holder/nur-packages/tree/master/modules/hostapd">hostapd</a>. Модуль позволяет создать N точек доступа на hostapd в дополнение к основной</li>
<li>Обход РКН<br />
<a href="https://github.com/repos-holder/nur-packages/blob/master/modules/rkn.nix">rkn</a>. Модуль реализует обход ограничений роскомпозора. Используемое ПО nginx и dnsmasq</li>
<li>Файлопомойка</li>
<li>Торрент-клиент</li>
<li>Медиа-сервер</li>
<li>Виртуализация. <em>Не особо актуально, поскольку на основном компе под это дело памяти и процессорной мощи в разы больше</em></li>
<li>Стриминг игр на другие устройства<br />
<a href="https://github.com/repos-holder/nur-packages/blob/master/modules/headless.nix">headless</a>. Модуль реализует «безголовый» графический сервер для стриминга<br />
<a href="https://github.com/repos-holder/nur-packages/blob/master/modules/sunshine.nix">sunshine</a>. Модуль для правильной установки ПО для стриминга игр Sunshine, работающего по протоколу Moonlight. На клиент, например телевизор устанавливаем соответствующий Android клиент</li>
<li>Мониторинг</li>
<li>VPN<br />
<a href="https://github.com/repos-holder/nur-packages/blob/master/modules/edgevpn.nix">edgevpn</a>. Модуль реализующий VPN сервер или клиент на базе библиотеки libp2p. Не требует публичного IP адреса и систем авторизации от третьих лиц</li>
<li>Git</li>
<li>Синхронизация файлов</li>
<li>Веб-панель<br />
<a href="https://github.com/repos-holder/nur-packages/blob/master/modules/cockpit.nix">cockpit</a>. Редхатовский современный а-ля webmin</li>
<li><del>Сборочная ферма</del>. Данный функционал перенёс на основной комп</li>
<li>Принт-сервер</li>
<li><del>Блокировщик рекламы</del>. По результатам оказалось, что это лучше делать на клиентах</li>
</ul>
<p>
    
      категории <a title="All pages tagged 'сервер'." href="./tags/%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80.html">сервер</a>, <a title="All pages tagged 'nixos'." href="./tags/nixos.html">nixos</a>, <a title="All pages tagged 'linux'." href="./tags/linux.html">linux</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/server.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/books.html">Книги которые взорвали мозг</a>
<br />
18 января 2021

    написал dukzcry

</p>
<ul>
<li>Чайна Мьевиль «Вокзал потерянных снов»</li>
<li>Говард Лакврафт «Сомнамбулический поиск неведомого Кадата»</li>
<li>Майкл Суэнвик «Дочь железного дракона»</li>
<li>Дон Делилло «Белый шум»</li>
<li>Джефф Нун «Брошенные машины»</li>
<li>Иван Братко «Программирование на языке Пролог для искусственного интеллекта» <em>(внезапно)</em></li>
<li>Элиезер Юдковский «Гарри Поттер и методы рационального мышления»</li>
<li>Эдвин Э. Эбботт «Флатландия»</li>
</ul>
<p>
    
      категории <a title="All pages tagged 'книги'." href="./tags/%D0%BA%D0%BD%D0%B8%D0%B3%D0%B8.html">книги</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/books.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/germany.html">Германия</a>
<br />
16 ноября 2019

    написал dukzcry

</p>
<p>Съездил в Берлин. Фотоотчет присутствует.</p>
<p><span class="math inline">

<a href="./gallery/germany/IMG_20191109_204239.jpg.html"><img src="./gallery/germany/IMG_20191109_204239.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/germany/IMG_20191109_204239.jpg">



<a href="./gallery/germany/IMG_20191110_123635.jpg.html"><img src="./gallery/germany/IMG_20191110_123635.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/germany/IMG_20191110_123635.jpg">



<a href="./gallery/germany/IMG_20191110_164656.jpg.html"><img src="./gallery/germany/IMG_20191110_164656.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/germany/IMG_20191110_164656.jpg">



<a href="./gallery/germany/IMG_20191110_172042.jpg.html"><img src="./gallery/germany/IMG_20191110_172042.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/germany/IMG_20191110_172042.jpg">



<a href="./gallery/germany/IMG_20191110_174337.jpg.html"><img src="./gallery/germany/IMG_20191110_174337.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/germany/IMG_20191110_174337.jpg">


</span></p>
<p>
    
      категории <a title="All pages tagged 'путешествия'." href="./tags/%D0%BF%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html">путешествия</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/germany.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/mod.html">Слушаем и скробблим трекерную музыку</a>
<br />
22 ноября 2017

    написал dukzcry

</p>
<blockquote>
<p>Забудьте про ручное тэгирование модулей в XMPlay ради скробблинга!</p>
</blockquote>
<p><a href="https://github.com/dukzcry/crap/tree/master/modplay">Скрипт</a> подходит для прослушивания амижных и писишных трекерных модулей. Используются движки <a href="http://zakalwe.fi/uade/">UADE</a> и <a href="https://lib.openmpt.org/libopenmpt/">libopenmpt</a> От чудесного <a href="http://www.un4seen.com/bass.html">BASS</a> пришлось отказаться по причине небольшого числа поддерживаемых форматов. Впрочем, по заверениям экспертов, libopenmpt очень неплох в плане точности воспроизведения. А еще говорят, что <a href="http://xmp.sourceforge.net/">XMP</a> исправляется.</p>
<p>Музыку в архивах играть мы тоже могем. А вкупе с curlftpfs и модули качать не надо:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curlftpfs</span> ftp://ftp.scene.org/pub/music/artists/ ~/Music</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">modplay.sh</span> <span class="st">&quot;4-mat&quot;</span> ~/Music/4-mat/<span class="pp">*</span></span></code></pre></div>
<p>
    
      категории <a title="All pages tagged 'demoscene'." href="./tags/demoscene.html">demoscene</a>, <a title="All pages tagged 'lastfm'." href="./tags/lastfm.html">lastfm</a>, <a title="All pages tagged 'mod'." href="./tags/mod.html">mod</a>, <a title="All pages tagged 'tracker'." href="./tags/tracker.html">tracker</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/mod.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/croatia.html">Хорватия</a>
<br />
22 июля 2008

    написал dukzcry

</p>
<p><span class="math inline">

<a href="./gallery/croatia/IMG_20210308_0001.jpg.html"><img src="./gallery/croatia/IMG_20210308_0001.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/croatia/IMG_20210308_0001.jpg">



<a href="./gallery/croatia/IMG_20210308_0002.jpg.html"><img src="./gallery/croatia/IMG_20210308_0002.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/croatia/IMG_20210308_0002.jpg">



<a href="./gallery/croatia/IMG_20210308_0003.jpg.html"><img src="./gallery/croatia/IMG_20210308_0003.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/croatia/IMG_20210308_0003.jpg">



<a href="./gallery/croatia/IMG_20210308_0004.jpg.html"><img src="./gallery/croatia/IMG_20210308_0004.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/croatia/IMG_20210308_0004.jpg">



<a href="./gallery/croatia/IMG_20210308_0005.jpg.html"><img src="./gallery/croatia/IMG_20210308_0005.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/croatia/IMG_20210308_0005.jpg">


</span></p>
<p>
    
      категории <a title="All pages tagged 'путешествия'." href="./tags/%D0%BF%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html">путешествия</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/croatia.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/greece.html">Греция</a>
<br />
 1 июня 2007

    написал dukzcry

</p>
<p><span class="math inline">

<a href="./gallery/greece/IMG_20210308_0001.jpg.html"><img src="./gallery/greece/IMG_20210308_0001.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/greece/IMG_20210308_0001.jpg">



<a href="./gallery/greece/IMG_20210308_0002.jpg.html"><img src="./gallery/greece/IMG_20210308_0002.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/greece/IMG_20210308_0002.jpg">



<a href="./gallery/greece/IMG_20210308_0003.jpg.html"><img src="./gallery/greece/IMG_20210308_0003.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/greece/IMG_20210308_0003.jpg">



<a href="./gallery/greece/IMG_20210308_0004.jpg.html"><img src="./gallery/greece/IMG_20210308_0004.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/greece/IMG_20210308_0004.jpg">


</span></p>
<p>
    
      категории <a title="All pages tagged 'путешествия'." href="./tags/%D0%BF%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html">путешествия</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/greece.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/karelia.html">Карелия</a>
<br />
 1 июня 2005

    написал dukzcry

</p>
<p><span class="math inline">

<a href="./gallery/karelia/IMG_20210308_0001.jpg.html"><img src="./gallery/karelia/IMG_20210308_0001.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/karelia/IMG_20210308_0001.jpg">



<a href="./gallery/karelia/IMG_20210308_0002.jpg.html"><img src="./gallery/karelia/IMG_20210308_0002.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/karelia/IMG_20210308_0002.jpg">



<a href="./gallery/karelia/IMG_20210308_0003.jpg.html"><img src="./gallery/karelia/IMG_20210308_0003.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/karelia/IMG_20210308_0003.jpg">



<a href="./gallery/karelia/IMG_20210308_0004.jpg.html"><img src="./gallery/karelia/IMG_20210308_0004.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/karelia/IMG_20210308_0004.jpg">



<a href="./gallery/karelia/IMG_20210308_0005.jpg.html"><img src="./gallery/karelia/IMG_20210308_0005.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/karelia/IMG_20210308_0005.jpg">


</span></p>
<p>
    
      категории <a title="All pages tagged 'путешествия'." href="./tags/%D0%BF%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html">путешествия</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/karelia.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/england.html">Англия</a>
<br />
 1 июня 2003

    написал dukzcry

</p>
<p><span class="math inline">

<a href="./gallery/england/IMG_20210308_0001.jpg.html"><img src="./gallery/england/IMG_20210308_0001.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/england/IMG_20210308_0001.jpg">



<a href="./gallery/england/IMG_20210308_0002.jpg.html"><img src="./gallery/england/IMG_20210308_0002.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/england/IMG_20210308_0002.jpg">



<a href="./gallery/england/IMG_20210308_0003.jpg.html"><img src="./gallery/england/IMG_20210308_0003.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/england/IMG_20210308_0003.jpg">



<a href="./gallery/england/IMG_20210308_0004.jpg.html"><img src="./gallery/england/IMG_20210308_0004.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/england/IMG_20210308_0004.jpg">



<a href="./gallery/england/IMG_20210308_0005.jpg.html"><img src="./gallery/england/IMG_20210308_0005.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/england/IMG_20210308_0005.jpg">


</span></p>
<p>
    
      категории <a title="All pages tagged 'путешествия'." href="./tags/%D0%BF%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html">путешествия</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/england.md"></span>
</p>

    
    <div class="separator">
    <span class="alignleft"><span class="background">✂︎</span></span>
    <span class="aligncenter"><span class="background">✂︎</span></span>
    <span class="alignright"><span class="background">✂︎</span></span>
    </div>

    <p>
<a href="./posts/latvia.html">Латвия</a>
<br />
 1 июня 2001

    написал dukzcry

</p>
<p><span class="math inline">

<a href="./gallery/latvia/IMG_20210308_0001.jpg.html"><img src="./gallery/latvia/IMG_20210308_0001.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/latvia/IMG_20210308_0001.jpg">



<a href="./gallery/latvia/IMG_20210308_0002.jpg.html"><img src="./gallery/latvia/IMG_20210308_0002.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/latvia/IMG_20210308_0002.jpg">



<a href="./gallery/latvia/IMG_20210308_0003.jpg.html"><img src="./gallery/latvia/IMG_20210308_0003.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/latvia/IMG_20210308_0003.jpg">



<a href="./gallery/latvia/IMG_20210308_0004.jpg.html"><img src="./gallery/latvia/IMG_20210308_0004.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/latvia/IMG_20210308_0004.jpg">



<a href="./gallery/latvia/IMG_20210308_0005.jpg.html"><img src="./gallery/latvia/IMG_20210308_0005.thumb.jpg" /></a>
<link rel="prefetch" href="./gallery/latvia/IMG_20210308_0005.jpg">


</span></p>
<p>
    
      категории <a title="All pages tagged 'путешествия'." href="./tags/%D0%BF%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html">путешествия</a>
    
    <span class="disqus-comment-count" data-disqus-identifier="posts/latvia.md"></span>
</p>

    
<br />
<div class="arrow-left">

<div class="arrow-right">

</div>
</div>

</div>
<script id="dsq-count-scr" src="//dukzcry.disqus.com/count.js" async></script>
</body>
